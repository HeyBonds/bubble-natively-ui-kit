@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .gradient-purple-orange {
    background: linear-gradient(180deg, #AD256C 0%, #E76B0C 100%);
  }
  
  .font-jakarta { font-family: 'Plus Jakarta Sans', sans-serif; }
  .font-poppins { font-family: 'Poppins', sans-serif; }

  /* Animation Utility */
  .animate-fade-in {
    animation: fadeIn 0.5s ease-out forwards;
    will-change: transform, opacity;
    backface-visibility: hidden;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px) translateZ(0); }
    to { opacity: 1; transform: translateY(0) translateZ(0); }
  }

  /* Option specific transitions */
  .option-bar { transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
  .percentage { transition: opacity 0.3s ease 0.6s; }
  .selected-option { background: rgba(255, 255, 255, 0.15) !important; box-shadow: inset 0px 2px 8px rgba(0, 0, 0, 0.15); }

  /* 3D Pressed Button Effect */
  .btn-pressed {
    transition: all 0.1s ease;
    box-shadow: 0 4px rgba(0,0,0,0.15);
    transform: translateY(0);
  }
  .btn-pressed:active {
    box-shadow: 0 1px rgba(0,0,0,0.15) !important;
    transform: translateY(3px) !important;
  }

  /* Credit Animations */
  @keyframes creditFadeInScale {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    100% { opacity: 1; transform: translate(-50%, -50%) scale(1.5); }
  }
  .credit-center-animation {
    animation: creditFadeInScale 600ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }
  .credit-move-animation {
    transition: all 600ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Dim Overlay */
  .dim-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.6);
    opacity: 0;
    transition: opacity 600ms ease;
    z-index: 9998;
    pointer-events: auto;
  }
  .dim-overlay.active { opacity: 1; }

  /* Tab Selection Shimmer */
  @keyframes shimmer {
    0% { filter: brightness(100%); transform: scale(1); }
    50% { filter: brightness(150%) drop-shadow(0 0 5px rgba(255, 34, 88, 0.5)); transform: scale(1.15); }
    100% { filter: brightness(100%); transform: scale(1.1); }
  }
  .active-tab-shimmer {
    animation: shimmer 0.4s ease-out forwards;
  }

  .scrollbar-hide::-webkit-scrollbar { display: none; }
  .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

  /* Stack Navigation Animations */
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0.5; }
    to { transform: translateX(0); opacity: 1; }
  }
  @keyframes slideOutRight {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
  }
  @keyframes slideInLeft {
    from { transform: translateX(-20%); opacity: 0.8; }
    to { transform: translateX(0); opacity: 1; }
  }
  @keyframes slideOutLeft {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(-20%); opacity: 0.8; }
  }

  .animate-slide-in-right,
  .animate-slide-out-right,
  .animate-slide-in-left,
  .animate-slide-out-left {
    will-change: transform, opacity;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  .animate-slide-in-right { animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
  .animate-slide-out-right { animation: slideOutRight 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
  .animate-slide-in-left { animation: slideInLeft 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
  .animate-slide-out-left { animation: slideOutLeft 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }

  /* ── Phase Transition Animations ──
     All animations use ONLY transform + opacity (GPU-composited).
     No filter:blur / brightness — those force per-pixel repaints and tank FPS on Bubble. */

  /* Force GPU layer promotion on the animated wrapper */
  .phase-zoom-out, .phase-slide-up, .phase-complete-out,
  .phase-scale-in, .phase-slide-down, .phase-zoom-in,
  .phase-fade-in, .phase-fade-out {
    will-change: transform, opacity;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Welcome exit: zoom in + fade (feels like diving into the app) */
  @keyframes phaseZoomOut {
    0%   { opacity: 1; transform: scale(1) translateZ(0); }
    100% { opacity: 0; transform: scale(1.12) translateZ(0); }
  }
  .phase-zoom-out {
    animation: phaseZoomOut 0.45s cubic-bezier(0.4, 0, 1, 1) forwards;
  }

  /* Onboarding enter: slide up from bottom + fade */
  @keyframes phaseSlideUp {
    0%   { opacity: 0; transform: translateY(60px) translateZ(0); }
    100% { opacity: 1; transform: translateY(0) translateZ(0); }
  }
  .phase-slide-up {
    animation: phaseSlideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* Onboarding complete exit: scale down + fade */
  @keyframes phaseCompleteOut {
    0%   { opacity: 1; transform: scale(1) translateZ(0); }
    35%  { opacity: 1; transform: scale(1.03) translateZ(0); }
    100% { opacity: 0; transform: scale(0.92) translateZ(0); }
  }
  .phase-complete-out {
    animation: phaseCompleteOut 0.55s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  /* Main app enter: scale up from slightly behind + fade */
  @keyframes phaseScaleIn {
    0%   { opacity: 0; transform: scale(0.94) translateZ(0); }
    100% { opacity: 1; transform: scale(1) translateZ(0); }
  }
  .phase-scale-in {
    animation: phaseScaleIn 0.45s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* Onboarding slide back down (reverse of slide-up) */
  @keyframes phaseSlideDown {
    0%   { opacity: 1; transform: translateY(0) translateZ(0); }
    100% { opacity: 0; transform: translateY(60px) translateZ(0); }
  }
  .phase-slide-down {
    animation: phaseSlideDown 0.35s cubic-bezier(0.4, 0, 1, 1) forwards;
  }

  /* Welcome zoom back in (reverse of zoom-out) */
  @keyframes phaseZoomIn {
    0%   { opacity: 0; transform: scale(1.08) translateZ(0); }
    100% { opacity: 1; transform: scale(1) translateZ(0); }
  }
  .phase-zoom-in {
    animation: phaseZoomIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* Generic soft fade enter (loading → welcome, debug jumps) */
  @keyframes phaseFadeIn {
    0%   { opacity: 0; transform: translateZ(0); }
    100% { opacity: 1; transform: translateZ(0); }
  }
  .phase-fade-in {
    animation: phaseFadeIn 0.35s ease-out forwards;
  }

  /* Generic exit (debug jumps, sign-in shortcut) */
  @keyframes phaseFadeOut {
    0%   { opacity: 1; transform: translateZ(0); }
    100% { opacity: 0; transform: translateZ(0); }
  }
  .phase-fade-out {
    animation: phaseFadeOut 0.3s ease-in forwards;
  }
}
